!function(r){r.fn.formsLw=function(o){var t=r.extend({"color-error":"tomato","color-error-default":"white","number-of-parents":0,"post-file":"post.php","yandex-metric":!1,from:"email@email.com"},o),e=this;e.find(".form-lw-thanks").hide(),this.submit(function(o){o.preventDefault();var i=!0;r(".form-lw-check-field").keyup(function(){r(this).css("background-color",t["color-error-default"])});var f=[];if(e.find(".form-lw-check-field").each(function(){var o=r(this),e=r(this).attr("type"),n=r(this).data("title"),a=r(this).val();if("text"==e||void 0==e)if(0==a.length){i=!1;for(l=0;l<t["number-of-parents"];l++)o=o.parent();o.css("background-color",t["color-error"])}else f.push({title:n,value:a});if("email"==e&&!/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i.test(a)){i=!1;for(var l=0;l<t["number-of-parents"];l++)o=o.parent();o.css("background-color",t["color-error"])}}),f=JSON.stringify(f),1==i){var n=e.find(".form-lw-title-form").val(),a=t.emails,l=t.from;r.post(t["post-file"],{title:n,emails:a,from:l,input_result:f},function(r){e.find(".form-lw-thanks").show(),e.find(".form-lw-content").hide()})}})}}(jQuery);
